<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Äá» Kiá»ƒm Tra Sá»‘ 25 â€“ Lá»‹ch Sá»­</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=Source+Serif+4:ital,wght@0,300;0,400;0,600;1,400&display=swap" rel="stylesheet">
<style>
:root {
  --red: #c0392b;
  --gold: #d4a017;
  --dark: #1a1208;
  --paper: #fdf6e3;
  --ink: #2c1a0e;
  --muted: #7a6a5a;
  --green: #27ae60;
  --blue: #2980b9;
  --correct-bg: #eafaf1;
  --wrong-bg: #fdf2f2;
  --border: #d5c5a1;
  --shadow: rgba(44,26,14,0.13);
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Source Serif 4',Georgia,serif;background:var(--paper);color:var(--ink);min-height:100vh}

/* â”€â”€â”€ HEADER â”€â”€â”€ */
header{
  background:var(--dark);color:var(--gold);text-align:center;
  padding:26px 20px 18px;border-bottom:4px solid var(--gold);
  position:sticky;top:0;z-index:100;box-shadow:0 4px 18px var(--shadow);
}
header h1{font-family:'Playfair Display',serif;font-size:1.55rem;letter-spacing:2px;text-transform:uppercase}
header p{font-size:0.86rem;color:#c9a96e;margin-top:4px}

/* â”€â”€â”€ TIMER BAR â”€â”€â”€ */
#timer-bar{
  display:flex;align-items:center;justify-content:center;gap:16px;
  background:#231800;padding:10px 20px;
  position:sticky;top:88px;z-index:99;border-bottom:2px solid var(--gold);
}
#timer-wrap{display:flex;align-items:center;gap:10px}
#timer-icon{font-size:1.3rem}
#timer-display{
  font-family:'Playfair Display',serif;font-size:2rem;color:var(--gold);
  letter-spacing:4px;min-width:94px;text-align:center;transition:color .3s;
}
#timer-display.urgent{color:#e74c3c;animation:pulse 1s infinite}
#timer-label{color:#c9a96e;font-size:0.8rem;letter-spacing:1px;text-transform:uppercase}
#progress-text{color:#c9a96e;font-size:0.82rem;margin-left:auto}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.55}}

/* â”€â”€â”€ MAIN â”€â”€â”€ */
main{max-width:920px;margin:0 auto;padding:30px 18px 80px}

/* â”€â”€â”€ SECTION â”€â”€â”€ */
.section-title{
  font-family:'Playfair Display',serif;font-size:1.22rem;color:var(--red);
  border-bottom:2px solid var(--gold);padding-bottom:8px;margin:36px 0 20px;letter-spacing:1px;
}
.section-note{
  background:#fff8e7;border-left:4px solid var(--gold);padding:10px 16px;
  font-size:0.84rem;color:var(--muted);margin-bottom:18px;border-radius:0 6px 6px 0;
}

/* â”€â”€â”€ QUESTION CARD â”€â”€â”€ */
.q-card{
  background:#fff;border:1.5px solid var(--border);border-radius:10px;
  margin-bottom:22px;padding:20px 22px 16px;
  box-shadow:0 2px 10px var(--shadow);transition:border-color .2s;
}
.q-card.answered{border-color:var(--gold)}
.q-num{font-family:'Playfair Display',serif;font-size:0.76rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:7px}
.q-text{font-size:0.97rem;line-height:1.72;color:var(--ink);margin-bottom:14px;font-weight:600}
.q-text blockquote{
  font-style:italic;background:#fdf6e3;border-left:3px solid var(--gold);
  padding:11px 16px;margin:9px 0 10px;font-weight:400;font-size:0.92rem;
  line-height:1.8;color:#4a3322;border-radius:0 6px 6px 0;white-space:pre-line;
}
.q-text .source-note{display:block;font-size:0.79rem;color:var(--muted);font-style:italic;margin-top:5px;font-weight:400}

/* â”€â”€â”€ OPTIONS â”€â”€â”€ */
.options{display:flex;flex-direction:column;gap:8px}
.opt{
  display:flex;align-items:flex-start;gap:10px;padding:10px 14px;
  border:1.5px solid var(--border);border-radius:7px;cursor:pointer;
  transition:all .18s;background:var(--paper);font-size:0.93rem;line-height:1.56;
}
.opt:hover{border-color:var(--gold);background:#fffbf0}
.opt input[type="radio"]{margin-top:3px;accent-color:var(--gold);flex-shrink:0}
.opt.selected{border-color:var(--blue);background:#eef6ff}
.opt.correct{border-color:var(--green)!important;background:var(--correct-bg)!important;font-weight:600}
.opt.wrong{border-color:var(--red)!important;background:var(--wrong-bg)!important}

/* â”€â”€â”€ TRUE/FALSE â”€â”€â”€ */
.tf-table{width:100%;border-collapse:collapse;margin-top:6px}
.tf-table th{background:var(--dark);color:var(--gold);font-family:'Playfair Display',serif;font-size:0.79rem;padding:8px 12px;text-align:center;letter-spacing:.5px}
.tf-table td{border:1px solid var(--border);padding:10px 12px;font-size:0.91rem;vertical-align:top;line-height:1.62}
.tf-table tr:nth-child(even) td{background:#fdf6e3}
.tf-radio-group{display:flex;gap:12px;justify-content:center}
.tf-btn{
  padding:5px 16px;border:1.5px solid var(--border);border-radius:5px;
  cursor:pointer;font-size:0.83rem;font-family:'Source Serif 4',serif;
  background:var(--paper);transition:all .15s;white-space:nowrap;
}
.tf-btn:hover{background:#fffbf0;border-color:var(--gold)}
.tf-btn.selected-true{background:#eef6ff;border-color:var(--blue);color:var(--blue);font-weight:700}
.tf-btn.selected-false{background:#fff0f0;border-color:var(--red);color:var(--red);font-weight:700}
.tf-btn.correct-reveal{background:var(--correct-bg)!important;border-color:var(--green)!important;color:var(--green)!important;font-weight:700}
.tf-btn.wrong-reveal{background:var(--wrong-bg)!important;border-color:var(--red)!important;color:var(--red)!important}

/* â”€â”€â”€ SUBMIT BUTTON â”€â”€â”€ */
#submit-btn{
  display:block;margin:38px auto 0;padding:15px 56px;
  background:linear-gradient(135deg,var(--red),#a93226);color:#fff;border:none;
  border-radius:8px;font-family:'Playfair Display',serif;font-size:1.1rem;
  letter-spacing:1px;cursor:pointer;
  box-shadow:0 4px 18px rgba(192,57,43,.35);transition:all .2s;
}
#submit-btn:hover{transform:translateY(-2px);box-shadow:0 7px 24px rgba(192,57,43,.45)}
#submit-btn:disabled{background:var(--muted);cursor:default;transform:none;box-shadow:none}

/* â”€â”€â”€ REVIEW MARK â”€â”€â”€ */
.review-mark{display:none;margin-top:10px;padding:7px 12px;border-radius:6px;font-size:0.83rem;font-weight:600}
.review-mark.correct-mark{background:var(--correct-bg);color:var(--green);display:block;border:1px solid var(--green)}
.review-mark.wrong-mark{background:var(--wrong-bg);color:var(--red);display:block;border:1px solid var(--red)}
.review-mark.partial-mark{background:#fff8e7;color:#b7860b;display:block;border:1px solid var(--gold)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL OVERLAY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#modal-overlay{
  display:none;position:fixed;inset:0;z-index:9999;
  background:rgba(15,10,5,.75);backdrop-filter:blur(6px);
  align-items:center;justify-content:center;padding:20px;
}
#modal-overlay.show{display:flex}

/* Confirm Submit Modal */
#modal-confirm{
  background:#fff;border-radius:16px;max-width:440px;width:100%;
  box-shadow:0 24px 60px rgba(0,0,0,.35);overflow:hidden;
  transform:scale(.92);opacity:0;transition:all .3s cubic-bezier(.34,1.56,.64,1);
}
#modal-confirm.appear{transform:scale(1);opacity:1}
.modal-header{
  background:var(--dark);padding:22px 28px 18px;text-align:center;
  border-bottom:3px solid var(--gold);
}
.modal-header h2{font-family:'Playfair Display',serif;color:var(--gold);font-size:1.3rem;letter-spacing:1px}
.modal-header p{color:#c9a96e;font-size:0.83rem;margin-top:5px}
.modal-body{padding:24px 28px 20px}
.modal-stats{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:20px}
.stat-box{
  background:#fdf6e3;border:1.5px solid var(--border);border-radius:10px;
  padding:12px 14px;text-align:center;
}
.stat-box .val{font-family:'Playfair Display',serif;font-size:1.6rem;color:var(--ink);font-weight:700}
.stat-box .lbl{font-size:0.74rem;color:var(--muted);text-transform:uppercase;letter-spacing:.6px;margin-top:2px}
.stat-box.warn .val{color:var(--red)}
.warn-msg{
  background:#fff8e7;border:1.5px solid var(--gold);border-radius:8px;
  padding:10px 14px;font-size:0.84rem;color:#7a5c00;text-align:center;margin-bottom:16px;
  display:none;
}
.warn-msg.show{display:block}
.modal-btns{display:flex;gap:12px}
.btn-cancel{
  flex:1;padding:12px;border:2px solid var(--border);border-radius:8px;
  background:var(--paper);color:var(--ink);font-family:'Source Serif 4',serif;
  font-size:0.93rem;cursor:pointer;transition:all .18s;
}
.btn-cancel:hover{border-color:var(--muted);background:#f5efe0}
.btn-confirm{
  flex:1;padding:12px;border:none;border-radius:8px;
  background:linear-gradient(135deg,var(--red),#a93226);color:#fff;
  font-family:'Playfair Display',serif;font-size:0.95rem;letter-spacing:.5px;
  cursor:pointer;transition:all .18s;box-shadow:0 3px 12px rgba(192,57,43,.3);
}
.btn-confirm:hover{transform:translateY(-1px);box-shadow:0 5px 18px rgba(192,57,43,.4)}

/* Result Modal */
#modal-result{
  background:#fff;border-radius:20px;max-width:560px;width:100%;
  box-shadow:0 28px 70px rgba(0,0,0,.4);overflow:hidden;
  transform:scale(.88) translateY(30px);opacity:0;
  transition:all .45s cubic-bezier(.34,1.56,.64,1);
}
#modal-result.appear{transform:scale(1) translateY(0);opacity:1}
.result-hero{
  background:linear-gradient(135deg,#1a1208 0%,#2c1a0e 60%,#3d2510 100%);
  padding:36px 28px 30px;text-align:center;position:relative;overflow:hidden;
}
.result-hero::before{
  content:'';position:absolute;inset:0;
  background:radial-gradient(circle at 70% 30%,rgba(212,160,23,.12) 0%,transparent 60%);
}
.result-hero .trophy{font-size:3rem;margin-bottom:10px;display:block}
.result-hero h2{font-family:'Playfair Display',serif;color:var(--gold);font-size:1.6rem;margin-bottom:6px;position:relative}
.result-score{
  font-family:'Playfair Display',serif;font-size:4.2rem;color:#fff;
  line-height:1;margin:10px 0 6px;position:relative;
  text-shadow:0 0 30px rgba(212,160,23,.4);
}
.result-max{font-size:1.1rem;color:#c9a96e;position:relative}
.result-grade{
  display:inline-block;margin-top:12px;padding:6px 22px;
  border-radius:30px;font-size:0.88rem;font-weight:600;letter-spacing:.5px;
  position:relative;
}
.result-grade.xuatsac{background:rgba(39,174,96,.25);color:#6ee7a0;border:1px solid rgba(39,174,96,.4)}
.result-grade.kha{background:rgba(41,128,185,.25);color:#7ec8f0;border:1px solid rgba(41,128,185,.4)}
.result-grade.tb{background:rgba(212,160,23,.2);color:#f0d070;border:1px solid rgba(212,160,23,.35)}
.result-grade.yeu{background:rgba(192,57,43,.25);color:#f0907a;border:1px solid rgba(192,57,43,.35)}
.result-body{padding:24px 28px 28px}
.score-breakdown{width:100%;border-collapse:collapse;margin-bottom:22px}
.score-breakdown th{
  background:var(--dark);color:var(--gold);
  font-family:'Playfair Display',serif;font-size:0.79rem;padding:9px 14px;
  text-align:left;letter-spacing:.5px;
}
.score-breakdown td{border:1px solid var(--border);padding:9px 14px;font-size:0.9rem}
.score-breakdown tr:last-child td{font-weight:700;background:#fdf6e3;color:var(--ink)}
.result-btns{display:flex;gap:12px}
.btn-review{
  flex:1;padding:13px;border:2px solid var(--border);border-radius:9px;
  background:var(--paper);color:var(--ink);font-family:'Source Serif 4',serif;
  font-size:0.92rem;cursor:pointer;transition:all .18s;
}
.btn-review:hover{border-color:var(--gold);background:#fffbf0}
.btn-redo{
  flex:1;padding:13px;border:none;border-radius:9px;
  background:linear-gradient(135deg,var(--dark),#3d2510);color:var(--gold);
  font-family:'Playfair Display',serif;font-size:0.95rem;letter-spacing:.5px;
  cursor:pointer;transition:all .2s;box-shadow:0 3px 14px rgba(26,18,8,.3);
  border:1.5px solid var(--gold);
}
.btn-redo:hover{background:linear-gradient(135deg,#2c1a0e,#523020);transform:translateY(-1px)}

/* Confetti */
.confetti-piece{
  position:fixed;width:10px;height:10px;border-radius:2px;
  animation:confettiFall 2.2s ease-in forwards;pointer-events:none;z-index:10000;
}
@keyframes confettiFall{
  0%{transform:translateY(-20px) rotate(0deg);opacity:1}
  100%{transform:translateY(105vh) rotate(720deg);opacity:0}
}

/* â”€â”€â”€ RESPONSIVE â”€â”€â”€ */
@media(max-width:600px){
  header h1{font-size:1.15rem}
  #timer-display{font-size:1.5rem}
  .modal-stats{grid-template-columns:1fr 1fr}
  .result-score{font-size:3rem}
}
</style>
</head>
<body>

<header>
  <h1>ğŸ“œ Äá» Kiá»ƒm Tra Sá»‘ 25 â€” Lá»‹ch Sá»­</h1>
  <p>Tráº¯c nghiá»‡m má»™t lá»±a chá»n &amp; ÄÃºng / Sai Â· Thá»i gian: 45 phÃºt</p>
</header>

<div id="timer-bar">
  <div id="timer-wrap">
    <span id="timer-icon">â±</span>
    <div>
      <div id="timer-label">Thá»i gian cÃ²n láº¡i</div>
      <div id="timer-display">45:00</div>
    </div>
  </div>
  <span id="progress-text">0 / 40 Ã½ Ä‘Ã£ lÃ m</span>
</div>

<main>
  <div class="section-title">PHáº¦N I â€” Tráº¯c nghiá»‡m má»™t lá»±a chá»n (24 cÃ¢u Ã— 0.25 Ä‘iá»ƒm)</div>
  <div class="section-note">Má»—i cÃ¢u chá»‰ chá»n <strong>má»™t</strong> phÆ°Æ¡ng Ã¡n Ä‘Ãºng nháº¥t.</div>
  <div id="part1-container"></div>

  <div class="section-title">PHáº¦N II â€” ÄÃºng / Sai (4 cÃ¢u Ã— 1.0 Ä‘iá»ƒm)</div>
  <div class="section-note">Má»—i Ã½ a, b, c, d chá»n <strong>ÄÃºng</strong> hoáº·c <strong>Sai</strong>. Thang Ä‘iá»ƒm: 1 Ã½ = 0.1Ä‘ Â· 2 Ã½ = 0.25Ä‘ Â· 3 Ã½ = 0.5Ä‘ Â· 4 Ã½ = 1.0Ä‘</div>
  <div id="part2-container"></div>

  <button id="submit-btn" onclick="openConfirm()">ğŸ“© Ná»˜P BÃ€I</button>
</main>

<!-- â•â•â•â•â•â•â•â•â•â• CONFIRM MODAL â•â•â•â•â•â•â•â•â•â• -->
<div id="modal-overlay">
  <!-- Confirm -->
  <div id="modal-confirm">
    <div class="modal-header">
      <h2>ğŸ“‹ XÃ¡c nháº­n ná»™p bÃ i</h2>
      <p>Kiá»ƒm tra láº¡i trÆ°á»›c khi ná»™p</p>
    </div>
    <div class="modal-body">
      <div class="modal-stats">
        <div class="stat-box" id="stat-done1">
          <div class="val" id="stat-val1">0/24</div>
          <div class="lbl">Pháº§n I Ä‘Ã£ lÃ m</div>
        </div>
        <div class="stat-box" id="stat-done2">
          <div class="val" id="stat-val2">0/16</div>
          <div class="lbl">Pháº§n II Ä‘Ã£ lÃ m</div>
        </div>
        <div class="stat-box" id="stat-time">
          <div class="val" id="stat-time-val">â€”</div>
          <div class="lbl">Thá»i gian cÃ²n láº¡i</div>
        </div>
        <div class="stat-box" id="stat-empty">
          <div class="val" id="stat-empty-val">0</div>
          <div class="lbl">CÃ¢u chÆ°a lÃ m</div>
        </div>
      </div>
      <div class="warn-msg" id="warn-msg">
        âš  Báº¡n cÃ²n <strong id="warn-count"></strong> Ã½ chÆ°a tráº£ lá»i. Ná»™p bÃ i sáº½ tÃ­nh 0 Ä‘iá»ƒm cho cÃ¡c Ã½ Ä‘Ã³.
      </div>
      <div class="modal-btns">
        <button class="btn-cancel" onclick="closeModal()">â† LÃ m tiáº¿p</button>
        <button class="btn-confirm" onclick="confirmSubmit()">Ná»™p bÃ i ngay âœ“</button>
      </div>
    </div>
  </div>

  <!-- Result -->
  <div id="modal-result" style="display:none">
    <div class="result-hero">
      <span class="trophy">ğŸ†</span>
      <h2>Káº¿t quáº£ bÃ i kiá»ƒm tra</h2>
      <div class="result-score" id="res-score">0.00</div>
      <div class="result-max">/ 10.0 Ä‘iá»ƒm</div>
      <span class="result-grade" id="res-grade"></span>
    </div>
    <div class="result-body">
      <table class="score-breakdown">
        <thead><tr><th>ThÃ nh pháº§n</th><th>Äiá»ƒm Ä‘áº¡t</th><th>Tá»‘i Ä‘a</th></tr></thead>
        <tbody id="res-tbody"></tbody>
      </table>
      <div class="result-btns">
        <button class="btn-review" onclick="closeModalReview()">ğŸ” Xem Ä‘Ã¡p Ã¡n</button>
        <button class="btn-redo" onclick="redoQuiz()">ğŸ”„ LÃ m láº¡i bÃ i</button>
      </div>
    </div>
  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DATA â€“ Äá»€ Sá» 25
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const PART1_ORIGINAL = [
  {id:'p1q1',text:'Nhá»¯ng chÃ­nh sÃ¡ch cáº£i cÃ¡ch cá»§a Há»“ QuÃ½ Ly vá» quÃ¢n sá»± cÃ³ tÃ¡c dá»¥ng nhÆ° tháº¿ nÃ o Ä‘á»‘i vá»›i Äáº¡i Viá»‡t vÃ o cuá»‘i tháº¿ ká»· XIV â€“ XV?',opts:['Má»Ÿ rá»™ng diá»‡n tÃ­ch lÃ£nh thá»• lÃªn phÃ­a Báº¯c.','TÄƒng cÆ°á»ng kháº£ nÄƒng phÃ²ng thá»§ Ä‘áº¥t nÆ°á»›c.','Kiá»ƒm soÃ¡t Ä‘Æ°á»ng buÃ´n bÃ¡n qua biá»ƒn ÄÃ´ng.','Má»Ÿ rá»™ng quan há»‡ Ä‘á»‘i vá»›i cÃ¡c nÆ°á»›c Nam Ã.'],answer:1},
  {id:'p1q2',text:'VÃ o Ä‘áº§u tháº¿ ká»· XXI, nguyÃªn nhÃ¢n nÃ o sau Ä‘Ã¢y Ä‘Ã£ nÃ¢ng táº§m quan trá»ng vÃ  vá»‹ trÃ­ Ä‘á»‹a chiáº¿n lÆ°á»£c cá»§a biá»ƒn ÄÃ´ng?',opts:['Chá»§ nghÄ©a nghÄ©a khá»§ng bá»‘ Ä‘Ã£ Ä‘e dá»a an ninh tháº¿ giá»›i.','Chiáº¿n lÆ°á»£c toÃ n cáº§u cá»§a Má»¹ vÃ  cÃ¡c nÆ°á»›c phÆ°Æ¡ng TÃ¢y.','Sá»± dá»‹ch chuyá»ƒn cá»§a cÃ¡c trung tÃ¢m kinh táº¿ vÃ  chÃ­nh trá»‹.','Nhiá»u quá»‘c gia má»›i tuyÃªn bá»‘ Ä‘á»™c láº­p á»Ÿ ÄÃ´ng Nam Ã.'],answer:2},
  {id:'p1q3',text:'NguyÃªn nhÃ¢n nÃ o sau Ä‘Ã¢y thÃºc Ä‘áº©y Há»“ QuÃ½ Ly tiáº¿n hÃ nh cuá»™c cáº£i cÃ¡ch lá»›n trÃªn nhiá»u lÄ©nh vá»±c?',opts:['Háº¡n cháº¿ Pháº­t giÃ¡o phÃ¡t triá»ƒn.','NgÄƒn cháº·n nguy cÆ¡ pháº£n loáº¡n.','Ã‰p vua Tráº§n pháº£i nhÆ°á»ng ngÃ´i.','Äáº¥t nÆ°á»›c rÆ¡i vÃ o khá»§ng hoáº£ng.'],answer:3},
  {id:'p1q4',text:'VÃ¬ sao biá»ƒn ÄÃ´ng Ä‘Æ°á»£c coi lÃ  Ä‘á»‹a bÃ n chiáº¿n lÆ°á»£c quan trá»ng á»Ÿ khu vá»±c chÃ¢u Ã â€“ ThÃ¡i BÃ¬nh DÆ°Æ¡ng?',opts:['Cá»­a ngÃµ giao thÆ°Æ¡ng quá»‘c táº¿ cá»§a nhiá»u nÆ°á»›c.','CÃ³ diá»‡n tÃ­ch lá»›n nháº¥t trong cÃ¡c biá»ƒn tháº¿ giá»›i.','Tiá»m nÄƒng thá»§y Ä‘iá»‡n dá»“i dÃ o vÃ  dá»… khai thÃ¡c.','CÃ³ trá»¯ lÆ°á»£ng dáº§u má», than Ä‘Ã¡ lá»›n nháº¥t tháº¿ giá»›i.'],answer:0},
  {id:'p1q5',text:'Tá»• chá»©c quá»‘c táº¿ nÃ o sau Ä‘Ã¢y Ä‘Æ°á»£c thÃ nh láº­p trÆ°á»›c Chiáº¿n tranh tháº¿ giá»›i thá»© hai (1939 - 1945)?',opts:['Há»™i quá»‘c liÃªn.','ASEAN.','LiÃªn minh chÃ¢u Ã‚u.','LiÃªn há»£p quá»‘c.'],answer:0},
  {id:'p1q6',text:'Ná»™i dung nÃ o sau Ä‘Ã¢y pháº£n Ã¡nh Ä‘Ãºng nguyÃªn nhÃ¢n LiÃªn XÃ´ vÃ  cÃ¡c nÆ°á»›c ÄÃ´ng Ã‚u thÃ nh láº­p tá»• chá»©c VÃ¡c-xa-va vÃ o nÄƒm 1955?',opts:['Tiáº¿n hÃ nh cháº¡y Ä‘ua vÅ© trang vá»›i Má»¹.','Chá»‘ng láº¡i sá»± Ä‘e dá»a quÃ¢n sá»± tá»« NATO.','Chuáº©n bá»‹ tiáº¿n hÃ nh chiáº¿n tranh tháº¿ giá»›i.','Chá»©ng tá» siÃªu cÆ°á»ng sá»‘ má»™t tháº¿ giá»›i.'],answer:1},
  {id:'p1q7',text:'NguyÃªn nhÃ¢n nÃ o sau Ä‘Ã¢y Ä‘Ã£ gÃ¢y ra mÃ¢u thuáº«n, cáº£n trá»Ÿ quÃ¡ trÃ¬nh Viá»‡t Nam gia nháº­p tá»• chá»©c ASEAN?',opts:['Xuáº¥t phÃ¡t Ä‘iá»ƒm tháº¥p.','\"Váº¥n Ä‘á» Cam-pu-chia\".','Khá»§ng hoáº£ng kinh táº¿.','LÃ  thuá»™c Ä‘á»‹a cá»§a PhÃ¡p.'],answer:1},
  {id:'p1q8',text:'Ná»™i dung nÃ o sau Ä‘Ã¢y pháº£n Ã¡nh Ã½ nghÄ©a tÃ­ch cá»±c cá»§a quÃ¡ trÃ¬nh há»£p tÃ¡c trong tá»• chá»©c ASEAN?',opts:['Há»£p tÃ¡c Ä‘á»ƒ cÃ¹ng nhau phÃ¡t triá»ƒn kinh táº¿ - vÄƒn hÃ³a.','Tiáº¿n tá»›i thÃ nh láº­p má»™t LiÃªn bang ÄÃ´ng DÆ°Æ¡ng.','TÄƒng cÆ°á»ng sá»©c máº¡nh quÃ¢n sá»± á»Ÿ khu vá»±c Nam Ã.','Chá»‘ng láº¡i Ã¢m mÆ°u nÃ´ dá»‹ch, thá»‘ng trá»‹ cá»§a LiÃªn XÃ´.'],answer:0},
  {id:'p1q9',text:'Nghá»‹ quyáº¿t 15 cÃ³ tÃ¡c Ä‘á»™ng nhÆ° tháº¿ nÃ o Ä‘á»‘i vá»›i cÃ¡ch máº¡ng Viá»‡t Nam trong giai Ä‘oáº¡n 1954 â€“ 1965?',opts:['XÃ¡c Ä‘á»‹nh nhiá»‡m vá»¥ chiáº¿n lÆ°á»£c vÃ  trÆ°á»›c máº¯t cá»§a cÃ¡ch máº¡ng.','Thá»•i bÃ¹ng lÃªn phong trÃ o Ä‘áº¥u tranh cá»§a nhÃ¢n dÃ¢n miá»n Nam.','Táº¡o ra tháº¿ vÃ  lá»±c Ä‘á»ƒ tiáº¿n tá»›i giáº£i phÃ³ng hoÃ n toÃ n miá»n Nam.','Gáº¯n cÃ¡ch máº¡ng Viá»‡t Nam vá»›i phong trÃ o cÃ¡ch máº¡ng tháº¿ giá»›i.'],answer:1},
  {id:'p1q10',text:'Tá»« nÄƒm 1951, tá»• chá»©c nÃ o sau Ä‘Ã¢y Ä‘Ã£ lÃ£nh Ä‘áº¡o cuá»™c khÃ¡ng chá»‘ng thá»±c dÃ¢n PhÃ¡p cá»§a nhÃ¢n dÃ¢n Viá»‡t Nam Ä‘i Ä‘áº¿n tháº¯ng lá»£i?',opts:['Äáº£ng Lao Ä‘á»™ng Viá»‡t Nam.','Äáº£ng DÃ¢n chá»§ Viá»‡t Nam.','Viá»‡t Nam Quá»‘c dÃ¢n Ä‘áº£ng.','TÃ¢n Viá»‡t CÃ¡ch máº¡ng Ä‘áº£ng.'],answer:0},
  {id:'p1q11',text:'Ná»™i dung nÃ o sau Ä‘Ã¢y lÃ  nguyÃªn nhÃ¢n chá»§ quan dáº«n Ä‘áº¿n tháº¯ng lá»£i cá»§a cuá»™c khÃ¡ng chá»‘ng thá»±c dÃ¢n PhÃ¡p (1945 - 1954) cá»§a nhÃ¢n dÃ¢n Viá»‡t Nam?',opts:['Tinh tháº§n Ä‘oÃ n káº¿t cá»§a nhÃ¢n dÃ¢n ba nÆ°á»›c ÄÃ´ng DÆ°Æ¡ng.','Viá»‡n trá»£ váº­t cháº¥t to lá»›n cá»§a cÃ¡c nÆ°á»›c xÃ£ há»™i chá»§ nghÄ©a.','QuÃ¢n Ä‘á»™i Ä‘Ã£ tiáº¿n hÃ nh chiáº¿n tranh quy Æ°á»›c cÃ³ hiá»‡u quáº£.','Tinh tháº§n chiáº¿n Ä‘áº¥u dÅ©ng cáº£m cá»§a nhÃ¢n dÃ¢n Viá»‡t Nam.'],answer:3},
  {id:'p1q12',text:'Cuá»™c khÃ¡ng chiáº¿n chá»‘ng PhÃ¡p (1945 - 1954) cá»§a nhÃ¢n dÃ¢n Viá»‡t Nam trÃªn máº·t tráº­n quÃ¢n sá»± cÃ³ Ä‘áº·c Ä‘iá»ƒm Ä‘á»™c Ä‘Ã¡o nÃ o sau Ä‘Ã¢y?',opts:['Káº¿t há»£p cháº·t cháº½ ba máº·t tráº­n quÃ¢n sá»±, chÃ­nh trá»‹, ngoáº¡i giao.','Káº¿t há»£p chiáº¿n trÆ°á»ng chÃ­nh vá»›i chiáº¿n trÆ°á»ng sau lÆ°ng Ä‘á»‹ch.','Tá»• chá»©c nhiá»u chiáº¿n dá»‹ch lá»›n mang tÃ­nh há»§y diá»‡t Ä‘á»‘i phÆ°Æ¡ng.','Nhanh chÃ³ng xÃ¢y dá»±ng quÃ¢n Ä‘á»™i chÃ­nh quy vÃ  tinh nhuá»‡.'],answer:1},
  {id:'p1q13',text:'Ná»™i dung nÃ o sau Ä‘Ã¢y kháº³ng Ä‘á»‹nh sá»± cáº§n thiáº¿t cá»§a cÃ´ng cuá»™c Äá»•i má»›i do Äáº£ng Cá»™ng sáº£n Viá»‡t Nam tiáº¿n hÃ nh nÄƒm 1986?',opts:['QuÃ¡ trÃ¬nh há»c táº­p hÃ¬nh máº«u cá»§a LiÃªn XÃ´.','PhÃ¹ há»£p vá»›i xu tháº¿ phÃ¡t triá»ƒn cá»§a thá»i Ä‘áº¡i.','LÃ  káº¿ hoáº¡ch Ä‘Æ°á»£c váº¡ch ra tá»« khÃ¡ng chiáº¿n.','Nháº±m má»¥c tiÃªu khÃ¡ng chiáº¿n vÃ  kiáº¿n quá»‘c.'],answer:1},
  {id:'p1q14',text:'Ná»™i dung nÃ o sau Ä‘Ã¢y kháº³ng Ä‘á»‹nh sá»± Ä‘Ãºng Ä‘áº¯n cá»§a cÃ´ng cuá»™c Äá»•i má»›i Ä‘áº¥t nÆ°á»›c do Äáº£ng Cá»™ng sáº£n Viá»‡t Nam lÃ£nh Ä‘áº¡o tá»« nÄƒm 1986 Ä‘áº¿n nay?',opts:['ÄÃ£ lÃ  thÃ nh viÃªn cá»§a tá»• chá»©c LiÃªn Há»£p quá»‘c.','ÄÃ£ hoÃ n thÃ nh cÃ´ng nghiá»‡p hÃ³a, hiá»‡n Ä‘áº¡i hÃ³a.','Äá»i sá»‘ng nhÃ¢n dÃ¢n Ä‘Æ°á»£c nÃ¢ng cao vá» má»i máº·t.','Trá»Ÿ thÃ nh nÆ°á»›c cÃ³ thu nháº­p cao cá»§a tháº¿ giá»›i.'],answer:2},
  {id:'p1q15',text:'NhÃ¢n váº­t lá»‹ch sá»­ nÃ o sau Ä‘Ã¢y Ä‘Ã£ Ä‘á» ra chá»§ trÆ°Æ¡ng dá»±a vÃ o PhÃ¡p Ä‘á»ƒ chá»‘ng phong kiáº¿n, thÃºc Ä‘áº©y dÃ¢n tá»™c Viá»‡t Nam tiáº¿n bá»™?',opts:['Phan Chu Trinh.','Phan Thanh Giáº£n.','Nguyá»…n CÆ° Trinh.','Phan Bá»™i ChÃ¢u.'],answer:0},
  {id:'p1q16',text:'Sá»± kiá»‡n nÃ o sau Ä‘Ã¢y cÃ³ tÃ¡c Ä‘á»™ng sÃ¢u sáº¯c Ä‘áº¿n tÆ° tÆ°á»Ÿng cá»©u nÆ°á»›c cá»§a Phan Bá»™i ChÃ¢u cuá»‘i tháº¿ ká»· XIX Ä‘áº§u tháº¿ ká»· XX?',opts:['Chiáº¿n tranh tháº¿ giá»›i thá»© nháº¥t.','Cuá»™c cáº£i cÃ¡ch nÃ´ng nÃ´ á»Ÿ Nga.','Chiáº¿n tranh thá»‘ng nháº¥t Äá»©c.','Duy tÃ¢n Minh Trá»‹ á»Ÿ Nháº­t.'],answer:3},
  {id:'p1q17',text:'Ná»™i dung nÃ o sau Ä‘Ã¢y lÃ  háº¡n cháº¿ trong con Ä‘Æ°á»ng giáº£i phÃ³ng dÃ¢n tá»™c cá»§a cÃ¡c nhÃ  yÃªu nÆ°á»›c Viá»‡t Nam Ä‘áº§u tháº¿ ká»· XX?',opts:['ChÆ°a Ä‘á» ra má»¥c tiÃªu rÃµ rÃ ng.','ChÆ°a nháº­n ra báº£n cháº¥t cá»§a káº» thÃ¹.','NhÃ¢n dÃ¢n khÃ´ng á»§ng há»™ Ä‘áº¥u tranh.','Bá»‹ PhÃ¡p dÃ¬m trong biá»ƒn mÃ¡u.'],answer:1},
  {id:'p1q18',text:'Äá»‘i vá»›i quÃ¡ trÃ¬nh Ä‘i Ä‘áº¿n tháº¯ng lá»£i cá»§a CÃ¡ch máº¡ng thÃ¡ng TÃ¡m (1945), Nguyá»…n Ãi Quá»‘c khÃ´ng cÃ³ vai trÃ² nÃ o sau Ä‘Ã¢y?',opts:['TÃ¬m ra con Ä‘Æ°á»ng cá»©u nÆ°á»›c Ä‘Ãºng Ä‘áº¯n.','ThÃ nh láº­p Äáº£ng Cá»™ng sáº£n Viá»‡t Nam.','Äá» ra Ä‘Æ°á»ng lá»‘i khÃ¡ng chiáº¿n sÃ¡ng táº¡o.','Soáº¡n tháº£o CÆ°Æ¡ng lÄ©nh chÃ­nh trá»‹ Ä‘áº§u tiÃªn.'],answer:2},
  {id:'p1q19',text:'Ná»™i dung nÃ o sau Ä‘Ã¢y thá»ƒ hiá»‡n Ä‘Ãºng vai trÃ² cá»§a Nguyá»…n Ãi Quá»‘c trong phong trÃ o cÃ¡ch máº¡ng tháº¿ giá»›i nhá»¯ng nÄƒm 1920 â€“ 1930?',opts:['LÃ  chiáº¿n sá»¹ cá»™ng sáº£n quá»‘c táº¿ lá»—i láº¡c, nhiá»‡t thÃ nh.','LÃ£nh tá»¥ cá»§a Quá»‘c táº¿ cá»™ng sáº£n á»Ÿ ÄÃ´ng Nam Ã.','Phá»¥ trÃ¡ch ban PhÆ°Æ¡ng ÄÃ´ng cá»§a Quá»‘c táº¿ thá»© hai.','ChuyÃªn nghiÃªn cá»©u vá» váº¥n Ä‘á» nÃ´ng dÃ¢n á»Ÿ LiÃªn XÃ´.'],answer:0},
  {id:'p1q20',text:'Tá»• chá»©c nÃ o sau Ä‘Ã¢y Ä‘Æ°á»£c Chá»§ tá»‹ch Há»“ ChÃ­ Minh thÃ nh láº­p nÄƒm 1941 vá»›i má»¥c Ä‘Ã­ch Ä‘áº¥u tranh giáº£i phÃ³ng dÃ¢n tá»™c Viá»‡t Nam?',opts:['An Nam Cá»™ng sáº£n Äáº£ng.','ÄÃ´ng DÆ°Æ¡ng Cá»™ng sáº£n Äáº£ng.','Máº·t tráº­n Viá»‡t Nam Ä‘á»™c láº­p Ä‘á»“ng minh.','ÄÃ´ng DÆ°Æ¡ng cá»™ng sáº£n liÃªn Ä‘oÃ n.'],answer:2},
  {id:'p1q21',text:'CÃ¡c cuá»™c chiáº¿n tranh cá»¥c bá»™ trong khuÃ´n khá»• Chiáº¿n tranh láº¡nh Ä‘Ã£ Ä‘á»ƒ láº¡i nhiá»u bÃ i há»c kinh nghiá»‡m cho Viá»‡t Nam trong xÃ¢y dá»±ng vÃ  báº£o vá»‡ tá»• quá»‘c, ngoáº¡i trá»« bÃ i há»c nÃ o sau Ä‘Ã¢y?',opts:['KiÃªn quyáº¿t Ä‘áº¥u tranh Ä‘á»ƒ báº£o vá»‡ chá»§ quyá»n Ä‘áº¥t nÆ°á»›c.','KiÃªn trÃ¬ sá»± lÃ£nh Ä‘áº¡o cá»§a Äáº£ng Cá»™ng sáº£n Viá»‡t Nam.','Thá»±c hiá»‡n Ä‘Æ°á»ng lá»‘i Ä‘á»™c láº­p tá»± chá»§, khÃ´ng bá»‹ chi phá»‘i.','XÃ¢y dá»±ng sá»©c máº¡nh tá»•ng há»£p, phÃ¡t huy tiá»m lá»±c Ä‘áº¥t nÆ°á»›c.'],answer:1},
  {id:'p1q22',text:'Nháº­n Ä‘á»‹nh nÃ o sau Ä‘Ã¢y pháº£n Ã¡nh Ä‘Ãºng bá»‘i cáº£nh khu vá»±c vÃ  quá»‘c táº¿ dáº«n Ä‘áº¿n sá»± thÃ nh láº­p cá»§a tá»• chá»©c ASEAN?',opts:['CÃ¡c cÆ°á»ng quá»‘c tÄƒng cÆ°á»ng chi phá»‘i vÃ  Ä‘áº·t áº£nh hÆ°á»Ÿng á»Ÿ khu vá»±c ÄÃ´ng Nam Ã.','Xu tháº¿ toÃ n cáº§u hÃ³a trÃªn tháº¿ giá»›i báº¯t Ä‘áº§u xuáº¥t hiá»‡n vÃ  ngÃ y cÃ ng trá»Ÿ nÃªn phá»• biáº¿n.','CÃ¡c quá»‘c gia trong khu vá»±c Ä‘á»u giÃ nh Ä‘Æ°á»£c Ä‘á»™c láº­p vÃ  tiáº¿n lÃªn xÃ£ há»™i chá»§ nghÄ©a.','Tráº­t tá»± hai cá»±c Ianta tan rÃ£ hoÃ n toÃ n, quan há»‡ quá»‘c táº¿ ngÃ y cÃ ng Ä‘Æ°á»£c má»Ÿ rá»™ng.'],answer:0},
  {id:'p1q23',text:'Nháº­n Ä‘á»‹nh nÃ o sau Ä‘Ã¢y lÃ  Ä‘Ãºng vá»›i sá»± phÃ¡t triá»ƒn cá»§a cÃ¡ch máº¡ng Viá»‡t Nam trong giai Ä‘oáº¡n 1954 â€“ 1975?',opts:['CÃ¡ch máº¡ng miá»n Nam phÃ¡t triá»ƒn phá»¥ thuá»™c vÃ o cÃ¡ch máº¡ng miá»n Báº¯c.','CÃ¡ch máº¡ng miá»n Nam quyáº¿t Ä‘á»‹nh sá»± phÃ¡t triá»ƒn cá»§a cÃ¡ch máº¡ng cáº£ nÆ°á»›c.','CÃ¡ch máº¡ng hai miá»n cÃ³ má»‘i liÃªn há»‡ máº­t thiáº¿t, gáº¯n bÃ³, tÃ¡c Ä‘á»™ng láº«n nhau.','CÃ¡ch máº¡ng miá»n Báº¯c vÃ  miá»n Nam phÃ¡t triá»ƒn Ä‘á»™c láº­p vÃ  triá»‡t tiÃªu nhau.'],answer:2},
  {id:'p1q24',text:'Phong trÃ o ÄÃ´ng Du (1905-1908) do Phan Bá»™i ChÃ¢u khá»Ÿi xÆ°á»›ng Ä‘Ã£ Ä‘á»ƒ láº¡i bÃ i há»c nÃ o sau Ä‘Ã¢y cho nhÃ¢n dÃ¢n Viá»‡t Nam hiá»‡n nay?',opts:['Muá»‘n phÃ¡t triá»ƒn pháº£i dá»±a vÃ o sá»©c mÃ¬nh lÃ  chÃ­nh.','Thá»±c hiá»‡n liÃªn káº¿t, cháº·t cháº½ toÃ n diá»‡n vá»›i Nháº­t Báº£n.','Cáº§n Ä‘áº§u tÆ° Ä‘Ãºng má»©c cho há»c sinh Ä‘i du há»c Nháº­t Báº£n.','Ãp dá»¥ng mÃ´ hÃ¬nh giÃ¡o dá»¥c Nháº­t Báº£n vÃ o Viá»‡t Nam.'],answer:0}
];

const PART2_ORIGINAL = [
  {
    id:'p2q1',
    intro:'Cho nhá»¯ng thÃ´ng tin trong báº£ng sau Ä‘Ã¢y:',
    table:[
      {time:'1967-1976',act:'ThÃ nh láº­p vÃ  bÆ°á»›c Ä‘áº§u phÃ¡t triá»ƒn vá» cÆ¡ cáº¥u tá»• chá»©c, nguyÃªn táº¯c hoáº¡t Ä‘á»™ng. Há»™i nghá»‹ Bá»™ trÆ°á»Ÿng Ngoáº¡i giao ASEAN lÃ  cÆ¡ cháº¿ hoáº¡ch Ä‘á»‹nh chÃ­nh sÃ¡ch cao nháº¥t. NÄƒm 1971, ASEAN ra TuyÃªn bá»‘ ÄÃ´ng Nam Ã lÃ  khu vá»±c hoÃ  bÃ¬nh, tá»± do vÃ  trung láº­p.'},
      {time:'1976-1999',act:'- PhÃ¡t triá»ƒn máº¡nh vá» tá»• chá»©c. Tá»« sau Hiá»‡p Æ°á»›c Ba-li (1976), Há»™i nghá»‹ ThÆ°á»£ng Ä‘á»‰nh lÃ  cÆ¡ cháº¿ hoáº¡ch Ä‘á»‹nh chÃ­nh sÃ¡ch cao nháº¥t, Ban ThÆ° kÃ­ ASEAN Ä‘Æ°á»£c thÃ nh láº­p, cÃ³ trá»¥ sá»Ÿ táº¡i Gia-cÃ¡c-ta (In-Ä‘Ã´-nÃª-xi-a).\n- PhÃ¡t triá»ƒn sá»‘ lÆ°á»£ng thÃ nh viÃªn, tá»« 5 nÆ°á»›c lÃªn 10 nÆ°á»›c.\n- Tham gia giáº£i quyáº¿t nhiá»u váº¥n Ä‘á» chÃ­nh trá»‹, an ninh lá»›n trong khu vá»±c nhÆ° váº¥n Ä‘á» Cam-pu-chia.'},
      {time:'1999-2015',act:'- ThÃ´ng qua Hiáº¿n chÆ°Æ¡ng ASEAN (2007).\n- Äá» ra má»¥c tiÃªu thÃ nh láº­p Cá»™ng Ä‘á»“ng ASEAN.'},
      {time:'2015- nay',act:'- NÄƒm 2015, Cá»™ng Ä‘á»“ng ASEAN Ä‘Æ°á»£c thÃ nh láº­p.\n- Triá»ƒn khai, hiá»‡n thá»±c hoÃ¡ cÃ¡c má»¥c tiÃªu cá»§a Cá»™ng Ä‘á»“ng ASEAN.\n- PhÃ¡t triá»ƒn há»£p tÃ¡c giá»¯a ASEAN vá»›i cÃ¡c Ä‘á»‘i tÃ¡c bÃªn ngoÃ i nháº±m thÃºc Ä‘áº©y hoÃ  bÃ¬nh, phÃ¡t triá»ƒn trong khu vá»±c vÃ  trÃªn tháº¿ giá»›i.'}
    ],
    subs:[
      {label:'a',text:'TÆ° liá»‡u Ä‘á» cáº­p Ä‘áº¿n nhá»¯ng nÃ©t chÃ­nh trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn cá»§a tá»• chá»©c ASEAN tá»« khi thÃ nh láº­p Ä‘áº¿n nay.',answer:true},
      {label:'b',text:'Há»™i nghá»‹ thÆ°á»£ng Ä‘á»‰nh cá»§a bá»™ trÆ°á»Ÿng ngoáº¡i giao lÃ  cÆ¡ cháº¿ hoáº¡ch Ä‘á»‹nh chÃ­nh sÃ¡ch cao nháº¥t cá»§a tá»• chá»©c ASEAN.',answer:false},
      {label:'c',text:'Má»¥c tiÃªu chÃ­nh cá»§a ASEAN Ä‘Æ°á»£c thá»ƒ hiá»‡n trong Hiáº¿n chÆ°Æ¡ng lÃ  hÃ²a bÃ¬nh, há»£p tÃ¡c, trung láº­p, khÃ´ng liÃªn káº¿t.',answer:false},
      {label:'d',text:'Tá»« nÄƒm 2015, Cá»™ng Ä‘á»“ng ASEAN Ä‘Ã£ Ä‘Æ°á»£c thÃ nh láº­p vá»›i ba trá»¥ cá»™t, lÃ  bÆ°á»›c phÃ¡t triá»ƒn má»›i cá»§a tá»• chá»©c.',answer:true}
    ]
  },
  {
    id:'p2q2',
    intro:'Cho Ä‘oáº¡n tÆ° liá»‡u sau Ä‘Ã¢y:',
    quote:`"Há»“ Chá»§ tá»‹ch lÃ  tÆ°á»£ng trÆ°ng cao Ä‘áº¹p cá»§a chá»§ nghÄ©a yÃªu nÆ°á»›c chÃ¢n chÃ­nh káº¿t há»£p nhuáº§n nhuyá»…n vá»›i chá»§ nghÄ©a quá»‘c táº¿ vÃ´ sáº£n. TrÃ¡i tim, khá»‘i Ã³c cá»§a NgÆ°á»i dÃ nh cho dÃ¢n tá»™c Viá»‡t Nam ta cÅ©ng hÆ°á»›ng vá» giai cáº¥p vÃ´ sáº£n vÃ  cÃ¡c dÃ¢n tá»™c bá»‹ Ã¡p bá»©c trÃªn toÃ n tháº¿ giá»›i. LÃ  ngÆ°á»i há»c trÃ² trung thÃ nh cá»§a CÃ¡c MÃ¡c vÃ  LÃª-nin, Há»“ Chá»§ tá»‹ch cháº³ng nhá»¯ng lÃ  má»™t nhÃ  yÃªu nÆ°á»›c vÄ© Ä‘áº¡i, mÃ  cÃ²n lÃ  má»™t chiáº¿n sÄ© xuáº¥t sáº¯c trong phong trÃ o cá»™ng sáº£n quá»‘c táº¿ vÃ  phong trÃ o giáº£i phÃ³ng dÃ¢n tá»™c cá»§a tháº¿ ká»‰ XX. Há»“ Chá»§ tá»‹ch thÆ°á»ng dáº¡y chÃºng ta pháº£i chÄƒm lo báº£o vá»‡ sá»± Ä‘oÃ n káº¿t quá»‘c táº¿, vÃ¬ sá»± nghiá»‡p to lá»›n cá»§a cÃ¡ch máº¡ng Viá»‡t Nam, vÃ¬ nghÄ©a vá»¥ cao cáº£ Ä‘á»‘i vá»›i cÃ¡ch máº¡ng tháº¿ giá»›i".`,
    source:'Há»“ ChÃ­ Minh, ToÃ n táº­p, Táº­p 15, NXB ChÃ­nh trá»‹ Quá»‘c gia Sá»± tháº­t, HÃ  Ná»™i, 2011, tr.627)',
    subs:[
      {label:'a',text:'TÆ° liá»‡u kháº³ng Ä‘á»‹nh Há»“ ChÃ­ Minh lÃ  lÃ£nh tá»¥ vÄ© Ä‘áº¡i cá»§a dÃ¢n tá»™c Viá»‡t Nam vÃ  phong trÃ o cá»™ng sáº£n quá»‘c táº¿.',answer:false},
      {label:'b',text:'TÆ° tÆ°á»Ÿng vÃ  hoáº¡t Ä‘á»™ng cá»§a Há»“ ChÃ­ Minh nháº¥n máº¡nh yáº¿u tá»‘ Ä‘oÃ n káº¿t quá»‘c táº¿, chá»§ nghÄ©a quá»‘c táº¿ vÃ´ sáº£n.',answer:true},
      {label:'c',text:'Chá»§ tá»‹ch Há»“ ChÃ­ Minh Ä‘Ã£ lÃ£nh Ä‘áº¡o nhÃ¢n dÃ¢n Viá»‡t Nam thá»±c hiá»‡n má»i nghÄ©a vá»¥ vá»›i cÃ¡ch máº¡ng tháº¿ giá»›i.',answer:false},
      {label:'d',text:'TÆ° tÆ°á»Ÿng Há»“ ChÃ­ Minh gÃ³p pháº§n bá»• sung vÃ  phÃ¡t triá»ƒn, lÃ m phong phÃº lÃ½ luáº­n cá»§a chá»§ nghÄ©a MÃ¡c â€“ LÃª nin.',answer:true}
    ]
  },
  {
    id:'p2q3',
    intro:'Cho Ä‘oáº¡n tÆ° liá»‡u sau Ä‘Ã¢y:',
    quote:`"NhÃ¬n láº¡i cháº·ng Ä‘Æ°á»ng Ä‘áº§u tiÃªn trong cÃ´ng cuá»™c Äá»•i má»›i, ngoáº¡i giao thi hÃ nh Ä‘Æ°á»ng lá»‘i "hoÃ  bÃ¬nh phÃ¡t triá»ƒn" Ä‘Ã£ gÃ³p pháº§n Ä‘Æ°a Ä‘áº¿n thÃ nh cÃ´ng lá»›n: Viá»‡t Nam Ä‘Ã£ phÃ¡ bá» cuá»™c bao vÃ¢y cáº¥m váº­n ngáº·t nghÃ¨o cá»§a cÃ¡c lá»±c lÆ°á»£ng chá»‘ng Ä‘á»‘i, giáº£i quyáº¿t thoáº£ Ä‘Ã¡ng váº¥n Ä‘á» Cam-pu-chia, Ä‘Æ°a quan há»‡ Viá»‡t Nam â€“ LÃ o â€“ Cam-pu-chia sang trang má»›i, Ãªm áº¥m, khÃ´i phá»¥c quan há»‡ há»¯u nghá»‹ vá»›i cÃ¡c nÆ°á»›c trong khu vá»±c ÄÃ´ng Nam Ã, bÃ¬nh thÆ°á»ng hoÃ¡ quan há»‡ há»¯u nghá»‹, há»£p tÃ¡c vá»›i táº¥t cáº£ cÃ¡c nÆ°á»›c tÆ° báº£n phÃ¡t triá»ƒn, cáº£i thiá»‡n má»™t bÆ°á»›c quan há»‡ vá»›i Má»¹, má»Ÿ Ä‘Æ°á»ng cho viá»‡c sá»›m thiáº¿t láº­p quan há»‡ ngoáº¡i giao giá»¯a Viá»‡t Nam vá»›i Hoa Ká»³.`,
    source:'(Nguyá»…n Kháº¯c Huá»³nh, Ngoáº¡i giao Viá»‡t Nam: GÃ³c nhÃ¬n vÃ  suy ngáº«m, NXB ChÃ­nh trá»‹ quá»‘c gia Sá»± tháº­t, HÃ  Ná»™i, 2011, tr.271)',
    subs:[
      {label:'a',text:'TÆ° liá»‡u Ä‘á» cáº­p Ä‘áº¿n nhá»¯ng thÃ nh tá»±u cá»§a ngoáº¡i giao Viá»‡t Nam trong nhá»¯ng nÄƒm Ä‘áº§u tiáº¿n hÃ nh Ä‘á»•i má»›i Ä‘áº¥t nÆ°á»›c.',answer:true},
      {label:'b',text:'Ngoáº¡i giao Ä‘Ã£ gÃ³p pháº§n bÃ¬nh thÆ°á»ng hÃ³a quan há»‡ vá»›i Má»¹, táº¡o cÆ¡ sá»Ÿ Ä‘á»ƒ Viá»‡t Nam báº¯t Ä‘áº§u tiáº¿n hÃ nh Ä‘á»•i má»›i.',answer:false},
      {label:'c',text:'Ngoáº¡i giao Ä‘Æ°á»£c Ä‘Ã¡nh giÃ¡ lÃ  lÃ  trá»ng tÃ¢m trong cÃ´ng cuá»™c Ä‘á»•i má»›i á»Ÿ Viá»‡t Nam tá»« sau nÄƒm 1986 Ä‘áº¿n nay.',answer:false},
      {label:'d',text:'ThÃ nh cÃ´ng cá»§a ngoáº¡i giao Viá»‡t Nam Ä‘Ã£ Ä‘á»ƒ láº¡i bÃ i há»c to lá»›n vá» thá»±c thi Ä‘Æ°á»ng lá»‘i "hÃ²a bÃ¬nh phÃ¡t triá»ƒn".',answer:true}
    ]
  },
  {
    id:'p2q4',
    intro:'Cho Ä‘oáº¡n tÆ° liá»‡u sau Ä‘Ã¢y:',
    quote:`"Viá»‡t Nam khá»Ÿi Ä‘áº§u khÃ¡ng chiáº¿n chá»‘ng Má»¹ xÃ¢m lÆ°á»£c trong bá»‘i cáº£nh Hiá»‡p Ä‘á»‹nh GiÆ¡-ne-vÆ¡ (21 - 7 - 1954) - má»™t vÄƒn báº£n mang tÃ­nh phÃ¡p lÃ½ quá»‘c táº¿, cÃ´ng nháº­n chá»§ quyá»n, Ä‘á»™c láº­p vÃ  toÃ n váº¹n lÃ£nh thá»• cá»§a Viá»‡t Nam, LÃ o, Campuchia Ä‘Ã£ Ä‘Æ°á»£c kÃ½ káº¿t vÃ  cÃ³ hiá»‡u lá»±c; miá»n Báº¯c Ä‘Æ°á»£c hoÃ n toÃ n giáº£i phÃ³ng, tiáº¿n lÃªn chá»§ nghÄ©a xÃ£ há»™i; miá»n Nam tiáº¿p tá»¥c tiáº¿n hÃ nh cuá»™c cÃ¡ch máº¡ng dÃ¢n tá»™c dÃ¢n chá»§ nhÃ¢n dÃ¢n."`,
    source:'(Bá»™ Quá»‘c phÃ²ng â€“ Viá»‡n Lá»‹ch sá»­ quÃ¢n sá»± Viá»‡t Nam, Lá»‹ch sá»­ khÃ¡ng chiáº¿n chá»‘ng Má»¹ cá»©u nÆ°á»›c 1954 â€“ 1975, Táº­p 9, Nxb ChÃ­nh trá»‹ Quá»‘c gia, HÃ  Ná»™i 2013. tr.21)',
    subs:[
      {label:'a',text:'Viá»‡t Nam khá»Ÿi Ä‘áº§u cuá»™c khÃ¡ng chiáº¿n chá»‘ng Má»¹ cá»©u nÆ°á»›c khi chÆ°a cÃ³ Ä‘Æ°á»£c sá»± cÃ´ng nháº­n cá»§a cÃ¡c nÆ°á»›c trÃªn tháº¿ giá»›i.',answer:false},
      {label:'b',text:'Hiá»‡p Ä‘á»‹nh GiÆ¡ ne vÆ¡ lÃ  cÆ¡ sá»Ÿ phÃ¡p lÃ½ quá»‘c táº¿ Ä‘á»ƒ Viá»‡t Nam nÃªu cao tÃ­nh chÃ­nh nghÄ©a cá»§a cuá»™c khÃ¡ng chiáº¿n chá»‘ng Má»¹.',answer:true},
      {label:'c',text:'Hiá»‡p Ä‘á»‹nh GiÆ¡ ne vÆ¡ Ä‘Ã£ táº¡m thá»i chia cáº¯t Viá»‡t Nam lÃ m hai quá»‘c gia, buá»™c Viá»‡t Nam tiáº¿n hÃ nh thá»‘ng nháº¥t Ä‘áº¥t nÆ°á»›c.',answer:false},
      {label:'d',text:'Hiá»‡p Ä‘á»‹nh GiÆ¡ ne vÆ¡ Ä‘Ã£ gÃ³p pháº§n Ä‘Æ°a Ä‘áº¿n Ä‘áº·c Ä‘iá»ƒm Ä‘á»™c Ä‘Ã¡o, sÃ¡ng táº¡o vá» chiáº¿n lÆ°á»£c cÃ¡ch máº¡ng trong lá»‹ch sá»­ Viá»‡t Nam.',answer:true}
    ]
  }
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let part1Questions=[], part2Questions=[];
let userAnswers1={}, userAnswers2={};
let timerInterval=null, secondsLeft=45*60, submitted=false;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHUFFLE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function shuffle(a){const b=[...a];for(let i=b.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[b[i],b[j]]=[b[j],b[i]]}return b}

function buildPart1(){
  return shuffle(PART1_ORIGINAL).map(q=>{
    const si=shuffle([0,1,2,3]);
    return {...q,opts:si.map(i=>q.opts[i]),answer:si.indexOf(q.answer)};
  });
}
function buildPart2(){return shuffle(PART2_ORIGINAL)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RENDER PART 1
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function renderPart1(){
  const c=document.getElementById('part1-container');c.innerHTML='';
  const LBL=['A','B','C','D'];
  part1Questions.forEach((q,qi)=>{
    const card=document.createElement('div');card.className='q-card';card.id='card1-'+q.id;
    card.innerHTML=`<div class="q-num">CÃ¢u ${qi+1} / 24</div><div class="q-text">${q.text}</div><div class="options" id="opts-${q.id}"></div><div class="review-mark" id="mark1-${q.id}"></div>`;
    c.appendChild(card);
    const opts=document.getElementById('opts-'+q.id);
    q.opts.forEach((opt,oi)=>{
      const lbl=document.createElement('label');lbl.className='opt';lbl.id=`opt-${q.id}-${oi}`;
      lbl.innerHTML=`<input type="radio" name="${q.id}" value="${oi}"><span><strong>${LBL[oi]}.</strong> ${opt}</span>`;
      lbl.querySelector('input').addEventListener('change',()=>{
        userAnswers1[q.id]=oi;
        document.querySelectorAll(`label[id^="opt-${q.id}-"]`).forEach(l=>l.classList.remove('selected'));
        lbl.classList.add('selected');
        card.classList.add('answered');
        updateProgress();
      });
      opts.appendChild(lbl);
    });
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RENDER PART 2
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function renderPart2(){
  const c=document.getElementById('part2-container');c.innerHTML='';
  part2Questions.forEach((q,qi)=>{
    const card=document.createElement('div');card.className='q-card';card.id='card2-'+q.id;
    const num=document.createElement('div');num.className='q-num';num.textContent=`CÃ¢u ${qi+1} / 4 (Pháº§n II)`;
    card.appendChild(num);
    const qt=document.createElement('div');qt.className='q-text';
    qt.appendChild(Object.assign(document.createElement('span'),{textContent:q.intro}));
    if(q.table){
      const tbl=document.createElement('table');
      tbl.style.cssText='width:100%;border-collapse:collapse;margin:10px 0 8px;font-size:0.88rem;';
      tbl.innerHTML=`<thead><tr style="background:#1a1208;color:#d4a017"><th style="padding:8px 12px;border:1px solid #d5c5a1;text-align:left;white-space:nowrap">Thá»i gian</th><th style="padding:8px 12px;border:1px solid #d5c5a1;text-align:left">Hoáº¡t Ä‘á»™ng</th></tr></thead>`;
      const tb=document.createElement('tbody');
      q.table.forEach((row,ri)=>{
        const tr=document.createElement('tr');tr.style.background=ri%2===0?'#fff':'#fdf6e3';
        tr.innerHTML=`<td style="padding:8px 12px;border:1px solid #d5c5a1;font-weight:600;vertical-align:top;white-space:nowrap">${row.time}</td><td style="padding:8px 12px;border:1px solid #d5c5a1;white-space:pre-line">${row.act}</td>`;
        tb.appendChild(tr);
      });
      tbl.appendChild(tb);qt.appendChild(tbl);
    }
    if(q.quote){const bq=document.createElement('blockquote');bq.textContent=q.quote;qt.appendChild(bq)}
    if(q.source){qt.appendChild(Object.assign(document.createElement('span'),{className:'source-note',textContent:q.source}))}
    card.appendChild(qt);
    // TF table
    const tbl2=document.createElement('table');tbl2.className='tf-table';
    tbl2.innerHTML='<thead><tr><th style="width:36px">Ã</th><th>Ná»™i dung</th><th style="width:170px">Chá»n Ä‘Ã¡p Ã¡n</th></tr></thead>';
    const tb2=document.createElement('tbody');
    q.subs.forEach(sub=>{
      const key=q.id+'-'+sub.label;
      const tr=document.createElement('tr');
      const tdL=document.createElement('td');tdL.style.cssText='text-align:center;font-weight:700;font-family:Playfair Display,serif;';tdL.textContent=sub.label+')';
      const tdT=document.createElement('td');tdT.textContent=sub.text;
      const tdB=document.createElement('td');tdB.style.textAlign='center';
      const btnT=document.createElement('button');btnT.className='tf-btn';btnT.id=`tf-${key}-T`;btnT.textContent='âœ” ÄÃºng';
      const btnF=document.createElement('button');btnF.className='tf-btn';btnF.id=`tf-${key}-F`;btnF.textContent='âœ˜ Sai';
      btnT.onclick=()=>selectTF(key,true,q.id);
      btnF.onclick=()=>selectTF(key,false,q.id);
      const grp=document.createElement('div');grp.className='tf-radio-group';grp.appendChild(btnT);grp.appendChild(btnF);
      tdB.appendChild(grp);tr.appendChild(tdL);tr.appendChild(tdT);tr.appendChild(tdB);tb2.appendChild(tr);
    });
    tbl2.appendChild(tb2);card.appendChild(tbl2);
    card.appendChild(Object.assign(document.createElement('div'),{className:'review-mark',id:'mark2-'+q.id}));
    c.appendChild(card);
  });
}

function selectTF(key,val,qId){
  userAnswers2[key]=val;
  const T=document.getElementById(`tf-${key}-T`),F=document.getElementById(`tf-${key}-F`);
  T.className='tf-btn'+(val===true?' selected-true':'');
  F.className='tf-btn'+(val===false?' selected-false':'');
  updateProgress();
  const q=part2Questions.find(q=>q.id===qId);
  if(q&&q.subs.every(s=>userAnswers2[qId+'-'+s.label]!==undefined))
    document.getElementById('card2-'+qId)?.classList.add('answered');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROGRESS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function updateProgress(){
  const d1=Object.keys(userAnswers1).length,d2=Object.keys(userAnswers2).length;
  document.getElementById('progress-text').textContent=`${d1+d2} / 40 Ã½ Ä‘Ã£ lÃ m`;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TIMER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function startTimer(){
  secondsLeft=45*60;
  timerInterval=setInterval(()=>{
    secondsLeft--;
    const m=Math.floor(secondsLeft/60),s=secondsLeft%60;
    const d=document.getElementById('timer-display');
    d.textContent=`${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
    if(secondsLeft<=300)d.classList.add('urgent');
    if(secondsLeft<=0){clearInterval(timerInterval);if(!submitted)autoSubmit()}
  },1000);
}

function autoSubmit(){
  submitted=true;
  document.getElementById('submit-btn').disabled=true;
  document.querySelectorAll('input[type="radio"]').forEach(i=>i.disabled=true);
  const {score1,score2,details2}=calculateScore();
  showResult(score1,score2,details2,true);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFIRM MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function openConfirm(){
  if(submitted)return;
  const d1=Object.keys(userAnswers1).length,d2=Object.keys(userAnswers2).length;
  const empty=(24-d1)+(16-d2);
  document.getElementById('stat-val1').textContent=`${d1}/24`;
  document.getElementById('stat-val2').textContent=`${d2}/16`;
  const m=Math.floor(secondsLeft/60),s=secondsLeft%60;
  document.getElementById('stat-time-val').textContent=`${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
  document.getElementById('stat-empty-val').textContent=empty;
  document.getElementById('stat-empty').className='stat-box'+(empty>0?' warn':'');
  const wm=document.getElementById('warn-msg');
  if(empty>0){document.getElementById('warn-count').textContent=empty+' Ã½';wm.classList.add('show')}
  else wm.classList.remove('show');
  showModal('modal-confirm');
}

function closeModal(){
  const ov=document.getElementById('modal-overlay');
  ov.classList.remove('show');
  document.getElementById('modal-confirm').classList.remove('appear');
  document.getElementById('modal-result').classList.remove('appear');
}
function closeModalReview(){
  closeModal();
  setTimeout(()=>document.getElementById('result-panel-inline')?.scrollIntoView({behavior:'smooth'}),300);
}

function showModal(which){
  const ov=document.getElementById('modal-overlay');
  document.getElementById('modal-confirm').style.display=which==='modal-confirm'?'block':'none';
  document.getElementById('modal-result').style.display=which==='modal-result'?'block':'none';
  ov.classList.add('show');
  setTimeout(()=>document.getElementById(which).classList.add('appear'),20);
}

function confirmSubmit(){
  if(submitted)return;
  submitted=true;
  clearInterval(timerInterval);
  document.getElementById('submit-btn').disabled=true;
  document.querySelectorAll('input[type="radio"]').forEach(i=>i.disabled=true);
  document.getElementById('modal-confirm').classList.remove('appear');
  setTimeout(()=>{
    const {score1,score2,details2}=calculateScore();
    applyReview(score1,score2,details2);
    showModal('modal-result');
    fillResult(score1,score2,details2);
  },250);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCORE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function calculateScore(){
  let score1=0;
  part1Questions.forEach(q=>{if(userAnswers1[q.id]===q.answer)score1+=0.25});
  let score2=0;const details2={};
  part2Questions.forEach(q=>{
    let correct=0;
    q.subs.forEach(sub=>{if(userAnswers2[q.id+'-'+sub.label]===sub.answer)correct++});
    details2[q.id]=correct;
    score2+=correct===4?1:correct===3?.5:correct===2?.25:correct===1?.1:0;
  });
  return{score1,score2,details2};
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   APPLY REVIEW (inline)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function applyReview(score1,score2,details2){
  const LBL=['A','B','C','D'];
  part1Questions.forEach(q=>{
    const ua=userAnswers1[q.id];
    q.opts.forEach((_,oi)=>{
      const l=document.getElementById(`opt-${q.id}-${oi}`);if(!l)return;
      l.classList.remove('selected');
      if(oi===q.answer)l.classList.add('correct');
      else if(oi===ua&&ua!==q.answer)l.classList.add('wrong');
    });
    const mk=document.getElementById('mark1-'+q.id);if(!mk)return;
    if(ua===q.answer){mk.className='review-mark correct-mark';mk.textContent=`âœ” ÄÃºng â€” ÄÃ¡p Ã¡n: ${LBL[q.answer]}`}
    else if(ua===undefined){mk.className='review-mark wrong-mark';mk.textContent=`âš  ChÆ°a tráº£ lá»i â€” ÄÃ¡p Ã¡n Ä‘Ãºng: ${LBL[q.answer]}`}
    else{mk.className='review-mark wrong-mark';mk.textContent=`âœ˜ Sai â€” Báº¡n chá»n: ${LBL[ua]} | ÄÃ¡p Ã¡n Ä‘Ãºng: ${LBL[q.answer]}`}
  });
  part2Questions.forEach(q=>{
    const correct=details2[q.id];
    q.subs.forEach(sub=>{
      const key=q.id+'-'+sub.label;
      const ua=userAnswers2[key];
      const T=document.getElementById(`tf-${key}-T`),F=document.getElementById(`tf-${key}-F`);
      if(T)T.className='tf-btn';if(F)F.className='tf-btn';
      if(sub.answer){if(T)T.classList.add('correct-reveal')}else{if(F)F.classList.add('correct-reveal')}
      if(ua!==undefined&&ua!==sub.answer){
        if(ua){if(T)T.classList.add('wrong-reveal')}else{if(F)F.classList.add('wrong-reveal')}
      }
    });
    const qs=correct===4?1:correct===3?.5:correct===2?.25:correct===1?.1:0;
    const mk=document.getElementById('mark2-'+q.id);if(!mk)return;
    if(correct===4){mk.className='review-mark correct-mark';mk.textContent='âœ” HoÃ n toÃ n Ä‘Ãºng â€” +1.0 Ä‘iá»ƒm'}
    else if(correct===0){mk.className='review-mark wrong-mark';mk.textContent='âœ˜ KhÃ´ng cÃ³ Ã½ nÃ o Ä‘Ãºng â€” +0 Ä‘iá»ƒm'}
    else{mk.className='review-mark partial-mark';mk.textContent=`â—‘ ÄÃºng ${correct}/4 Ã½ â€” +${qs.toFixed(2)} Ä‘iá»ƒm`}
  });
}

function showResult(score1,score2,details2,isAuto){
  applyReview(score1,score2,details2);
  if(isAuto){showModal('modal-result');fillResult(score1,score2,details2)}
}

function fillResult(score1,score2,details2){
  const total=+(score1+score2).toFixed(2);
  document.getElementById('res-score').textContent=total.toFixed(2);
  const grade=document.getElementById('res-grade');
  if(total>=8){grade.textContent='ğŸ† Xuáº¥t sáº¯c';grade.className='result-grade xuatsac'}
  else if(total>=6.5){grade.textContent='ğŸ‘ KhÃ¡';grade.className='result-grade kha'}
  else if(total>=5){grade.textContent='ğŸ“˜ Trung bÃ¬nh';grade.className='result-grade tb'}
  else{grade.textContent='ğŸ“– Cáº§n cá»‘ gáº¯ng thÃªm';grade.className='result-grade yeu'}
  document.getElementById('res-tbody').innerHTML=`
    <tr><td>Pháº§n I (24 cÃ¢u Ã— 0.25Ä‘)</td><td>${score1.toFixed(2)} Ä‘</td><td>6.00 Ä‘</td></tr>
    <tr><td>Pháº§n II (4 cÃ¢u)</td><td>${score2.toFixed(2)} Ä‘</td><td>4.00 Ä‘</td></tr>
    <tr><td><strong>Tá»•ng cá»™ng</strong></td><td><strong>${total.toFixed(2)} Ä‘</strong></td><td><strong>10.00 Ä‘</strong></td></tr>
  `;
  if(total>=6.5)launchConfetti();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFETTI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function launchConfetti(){
  const colors=['#d4a017','#c0392b','#27ae60','#2980b9','#f39c12','#8e44ad'];
  for(let i=0;i<60;i++){
    const el=document.createElement('div');el.className='confetti-piece';
    el.style.cssText=`left:${Math.random()*100}vw;top:-20px;background:${colors[Math.floor(Math.random()*colors.length)]};width:${6+Math.random()*8}px;height:${6+Math.random()*8}px;animation-delay:${Math.random()*1.2}s;animation-duration:${1.8+Math.random()*.8}s;border-radius:${Math.random()>.5?'50%':'2px'}`;
    document.body.appendChild(el);
    setTimeout(()=>el.remove(),3500);
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   REDO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function redoQuiz(){
  submitted=false;userAnswers1={};userAnswers2={};
  clearInterval(timerInterval);
  closeModal();
  document.getElementById('submit-btn').disabled=false;
  document.getElementById('timer-display').classList.remove('urgent');
  document.getElementById('timer-display').style.color='';
  part1Questions=buildPart1();part2Questions=buildPart2();
  renderPart1();renderPart2();
  updateProgress();startTimer();
  window.scrollTo({top:0,behavior:'smooth'});
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function init(){
  part1Questions=buildPart1();part2Questions=buildPart2();
  renderPart1();renderPart2();
  updateProgress();startTimer();
}
window.addEventListener('DOMContentLoaded',init);
</script>
</body>
  </html>
